= javascript_include_tag "signup_flow"
= render :partial => 'partials/signup_header'

= render :partial => 'partials/nudge_icon'

.container.full-width.blue-bg.no-padding.white.align-center
  %br/ 
  %h1#lets-doit Create Your Account
#signup-progress.row.align-center
  .col-md-8.col-md-offset-2
    %ul.no-list
      %li.signup-active#step-1  
        %h4
          %span.green.hidden{:data => {'icon' => "D"}}
          1. Create Login    
      %li#step-2
        %h4
          %span.green.hidden{:data => {'icon' => "D"}}
          2. Confirm Account
      %li#step-3
        %h4
          %span.green.hidden{:data => {'icon' => "D"}}
          3. Done


%br/ 
.container
  = render partial: 'partials/error_messages_object_form', locals: {object: @user}
  / = render partial: 'partials/error_messages_object_form', locals: {object: @pickup_request}
%br/ 
%br/ 

= form_for @packing_supplies_request, url: create_signup_pages_path, :html => {:id => 'signup-form'} do |f| 

  / =fields_for @pickup_request do |f_hidden|
  /   = f_hidden.hidden_field :posted_delivery_date, class:"form-control"
  /   = f_hidden.hidden_field :posted_delivery_time, class:"form-control"

  ///////////////////////////////////////////////////
  // Signup /////////////////////////////////////////
  ///////////////////////////////////////////////////
  %section.text-center#signup-fourth
    .container
      .row
        .col-lg-6.col-md-offset-3
          %h3.double-underlined Account Setup
          .double-line
          .boxed-grey
            .row
              %br/ 
              = fields_for @user do |userAcct| 
                .col-md-8.col-md-offset-2.form-group.address-form
                  .row
                    .col-md-12
                      %div.extra-form-padding
                        = userAcct.text_field :name, autofocus: true, class:"form-control", placeholder: "Name"
                  .row#signup-emailaddr
                    .col-md-12
                      %div.extra-form-padding
                        = userAcct.email_field :email, autofocus: true, class:"form-control", placeholder: "Email Address"
                  .row
                    .col-md-12
                      %div.extra-form-padding
                        = userAcct.password_field :password, autofocus: true, class:"form-control", placeholder: "Password"
                .col-md-8.col-md-offset-2.bottom-buttons
                  = userAcct.submit "Create Account",:class => "btn btn-skin pull-right", id:"signup-fourth-btn", disabled: true                 
                  %a.pointer{href:"/"}
                    %h1.btn.btn-default.pull-left Back
              / = fields_for @user do |userAcct| 
              /   .col-md-8.col-md-offset-2.form-group.address-form
              /     .row
              /       .col-md-6
              /         %div.extra-form-padding
              /           = userAcct.text_field :first_name, autofocus: true, class:"form-control", placeholder: "First Name"
              /       .col-md-6
              /         %div.extra-form-padding
              /           = userAcct.text_field :last_name, autofocus: true, class:"form-control", placeholder: "Last Name"
              /     .row#signup-emailaddr
              /       .col-md-12
              /         %div.extra-form-padding
              /           = userAcct.email_field :email, autofocus: true, class:"form-control", placeholder: "Email Address"
              /     .row
              /       .col-md-6
              /         %div.extra-form-padding
              /           = userAcct.password_field :password, autocomplete: "off", class:"form-control", placeholder: "Password"
              /       .col-md-6
              /         %div.extra-form-padding
              /           = userAcct.password_field :password_confirmation, autocomplete: "off", class:"form-control", placeholder: "Confirm Password"
              /   .col-md-8.col-md-offset-2.bottom-buttons
              /     = userAcct.submit "Create Account",:class => "btn btn-skin pull-right", id:"signup-fourth-btn", disabled: true                 
              /     %a.pointer{href:"/"}
              /       %h1.btn.btn-default.pull-left Back
            %br/
            %br/ 
    %br/ 
    %br/ 
    %br/ 
    %br/ 
    %br/ 
    %br/ 



= render :partial => "partials/footer"
= render :partial => "partials/storageSizeModal"
= render :partial => "partials/outsideAreaModal"

= javascript_include_tag "item_selector"

:javascript
  
  
  /////////////////////////////////////////////////////////////
  // Prevent "enter" button submission
  /////////////////////////////////////////////////////////////
  $(document).ready(function() {
 
    var all_form = $(".form-control");
    
    all_form.on('input', function() {

      // THIS SHIT NEEDS TO BE FIXED
     if (!($("#signup-fourth").hasClass("hidden")) && ($("#signup-form").data('bootstrapValidator').isValid())){
       if ($("#user_email").val().length > 0 && $("#user_password").val().length > 0 && $("#user_name").val().length > 0){
         $("#signup-fourth-btn").removeAttr("disabled"); 
         console.log("show fourth button");
       } else{
          console.log("disabling button");
          $("#signup-fourth-btn").attr("disabled", true); 
       }
     }
     else{
         console.log("disabling button");
         $("#signup-fourth-btn").attr("disabled", true); 
      }
    });
  });

